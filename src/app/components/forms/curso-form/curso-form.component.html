<div class="flex flex-row justify-center align-items-center">
    <h3 class="text-xl text-center font-bold text-white pb-2">{{title}}</h3>
</div>
<div class="grid place-items-center">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="grid grid-cols-12 gap-4 w-full max-w-screen-lg">
        <div class="col-span-12 grid grid-cols-12 gap-4">

            <div class="col-span-12 xl:col-span-6 2xl:col-start-4 2xl:col-span-6">
                <div class="w-full h-full">
                    <label class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl" for="anioCalendario">Año calendario:</label>
                    <p-inputNumber inputId="integeronly" formControlName="anioCalendario" [min]="2000" [max]="3000" class="w-full"
                        styleClass="w-full text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl" inputStyleClass="h-[50px]" />
                    @if(form.get('anioCalendario')?.hasError('required') && form.get('anioCalendario')?.dirty){
                    <small class="p-error block text-red-600">El campo Año calendario es requerido</small>
                    }
                    @if(form.get('anioCalendario')?.hasError('min') && form.get('anioCalendario')?.dirty){
                    <small class="p-error block text-red-600">El año debe ser mínimo 2000</small>
                    }
                    @if(form.get('anioCalendario')?.hasError('max') && form.get('anioCalendario')?.dirty){
                    <small class="p-error block text-red-600">El año no puede exceder 3000</small>
                    }
                </div>
            </div>
            <div class="col-span-12 xl:col-span-6 2xl:col-start-4 2xl:col-span-6">
                <div class="w-full h-full">
                    <label class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl">Plan:</label>
                    <p-inputGroup>
                        <input type="text" pInputText placeholder="Seleccione un plan" class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl h-[50px]"
                            formControlName="plan" />
                        <p-button label="Seleccionar" severity="primary" 
                            [styleClass]="'text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl'"
                            (onClick)="toggleModalPlanes()">
                        </p-button>
                    </p-inputGroup>
                </div>
            </div>

            <div class="col-span-12 xl:col-span-6 2xl:col-start-4 2xl:col-span-6">
                <div class="w-full h-full">
                    <label class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl" for="descripcion">Descripcion:</label>
                    <input id="descripcion" pInputText formControlName="descripcion" type="text" maxlength="50"
                        class="w-full text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl h-[50px]">
                    @if(form.get('descripcion')?.hasError('required') && form.get('descripcion')?.dirty){
                    <small class="p-error block text-red-600">El campo descripcion es requerido</small>
                    }
                    @if(form.get('descripcion')?.hasError('maxlength') && form.get('descripcion')?.dirty){
                    <small class="p-error block text-red-600">La descripcion no puede exceder 50 caracteres</small>
                    }
                </div>
            </div>
            <div class="col-span-12 xl:col-span-6 2xl:col-start-4 2xl:col-span-6">
                <div class="w-full h-full">
                    <label class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl">Materia:</label>
                    <p-inputGroup>
                        <input type="text" pInputText placeholder="Seleccione una materia" class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl h-[50px]"
                            formControlName="materia" />
                        <p-button label="Seleccionar" [disabled]="!(planSelected$ | async)" severity="primary"
                            [styleClass]="'text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl'" (onClick)="toggleModalMaterias()">
                        </p-button>
                    </p-inputGroup>
                    @if (!(planSelected$ | async)) {
                    <small id="descripcion-help">Debe seleccionar un plan para seleccionar una materia</small>
                    }
                </div>
            </div>

            <div class="col-span-12 xl:col-span-6 2xl:col-start-4 2xl:col-span-6">
                <div class="w-full h-full">
                    <label class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl" for="cupo">Cupo:</label>
                    <p-inputNumber inputId="integeronly" formControlName="cupo" [min]="1" [max]="50" class="w-full"
                        styleClass="w-full text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl" inputStyleClass="h-[50px]" />
                    @if(form.get('cupo')?.hasError('required') && form.get('cupo')?.dirty){
                    <small class="p-error block text-red-600">El campo cupo es requerido</small>
                    }
                    @if(form.get('cupo')?.hasError('min') && form.get('cupo')?.dirty){
                    <small class="p-error block text-red-600">El cupo debe ser mínimo 1</small>
                    }
                    @if(form.get('cupo')?.hasError('max') && form.get('cupo')?.dirty){
                    <small class="p-error block text-red-600">El cupo no puede exceder 50</small>
                    }
                </div>
            </div>
            <div class="col-span-12 xl:col-span-6 2xl:col-start-4 2xl:col-span-6">
                <div class="w-full h-full">
                    <label class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl">Comisión:</label>
                    <p-inputGroup>
                        <input type="text" pInputText placeholder="Seleccione una comisión" class="text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl h-[50px]"
                            formControlName="comision" />
                        <p-button label="Seleccionar" [disabled]="!(planSelected$ | async)" severity="primary"
                            [styleClass]="'text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl'" (onClick)="toggleModalComisiones()">
                        </p-button>
                    </p-inputGroup>
                    @if (!(planSelected$ | async)) {
                    <small id="descripcion-help">Debe seleccionar un plan para seleccionar una comisión</small>
                    }
                </div>
            </div>
        </div>
        <div class="col-span-12 xl:col-span-12 2xl:col-start-4 2xl:col-span-6 grid grid-cols-2 gap-2 mt-4">
            <p-button type="submit" label="Guardar" icon="pi pi-check" severity="success"
                [styleClass]="'text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl px-4 py-3 sm:px-5 sm:py-3 md:px-6 md:py-3 lg:px-6 lg:py-3 w-full'"></p-button>
            <p-button label="Cancelar" icon="pi pi-times" severity="danger" 
                [styleClass]="'text-sm sm:text-base md:text-lg lg:text-xl xl:text-xl px-4 py-3 sm:px-5 sm:py-3 md:px-6 md:py-3 lg:px-6 lg:py-3 w-full'"
                (onClick)="redirectCursos()"></p-button>
        </div>
    </form>
</div>



<app-planes-modal></app-planes-modal>
<app-materias-modal></app-materias-modal>
<app-comisiones-modal></app-comisiones-modal>