<!-- La tabla se muestra siempre; el aviso solo aparece tras intentar actualizar cuando no está habilitado -->
<p-table #dt2 [value]="inscripciones" responsiveLayout="stack" [breakpoint]="'960px'" [paginator]="true" [scrollable]="true"
    [rows]="5" scrollHeight="flex" styleClass="p-datatable-gridlines p-datatable-striped h-full pt-0 text-sm lg:text-xl" [loading]="loading$"
    [globalFilterFields]="['descripcion, especialidad.descripcion']">
    <ng-template pTemplate="caption">
        <div class="grid">
            <div
               class="flex flex-col w-full gap-2 md:flex-row justify-between">
                <div>
                    @if(loading$){
                        <p-skeleton width="20rem" class="mb-2" />
                    }
                    @else{
                        <h2>{{materia?.descripcion}} - {{comision?.descripcion}}</h2>
                    }
                </div>
               <div>
                 <p-iconField iconPosition="left" class="mb-4 lg:mb-0 w-full">
                    <p-inputIcon>
                        <i class="pi pi-search"></i>
                    </p-inputIcon>
                    <input pInputText pSize="large" type="text" class="text-md sm:text-base md:text-base lg:text-base xl:text-base w-full h-[50px]" (input)="dt2.filterGlobal($any($event.target).value, 'contains')"
            placeholder="Buscar inscripción" />
                </p-iconField>
               </div>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th>Legajo</th>
            <th>Nombres</th>
            <th>Apellido</th>
            <th>Acciones</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-inscripcion>
        <tr>
            <td style="width:20%"><span class="p-column-title">Legajo</span>{{inscripcion.alumno.legajo}}
            <td style="width:30%"><span class="p-column-title">Nombres</span>{{inscripcion.alumno.nombre}}
            </td>
            <td style="width:30%"><span class="p-column-title">Apellido</span>{{inscripcion.alumno.apellido}}
            </td>
            <td style="width:20%"><span class="p-column-title">Acciones</span>
                <div class="flex flex-column sm:flex-row gap-2 justify-content-center">
                    <p-button label="Actualizar inscripción" severity="primary" (onClick)="onActualizarInscripcion(inscripcion._id)"></p-button>
                </div>
            </td>
        </tr>
    </ng-template>

</p-table>

@if (mostrarAviso) {
  <div class="flex flex-col items-center justify-center py-12 min-h-[300px] w-full">
      <div class="flex items-center justify-center w-32 h-32 rounded-full bg-red-600/30 backdrop-blur-sm border border-red-500 mb-6">
          <i class="pi pi-lock text-red-400 text-6xl"></i>
      </div>
      <h3 class="text-center text-white font-bold text-2xl md:text-3xl mb-4">Inscripciones cerradas</h3>
      <p class="text-center text-white text-lg md:text-xl max-w-2xl leading-relaxed">
          Las inscripciones para esta cátedra están deshabilitadas actualmente. No es posible actualizar inscripciones hasta que se habiliten nuevamente.
      </p>
  </div>
}

